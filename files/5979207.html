<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/grandyang/p/5979207.html">[LeetCode] Battleships in a Board å¹³æ¿ä¸Šçš„æˆ˜èˆ¹</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>&nbsp;</p>
<p>Given an 2D board, count how many different battleships are in it. The battleships are represented with&nbsp;<code>'X'</code>s, empty slots are represented with&nbsp;<code>'.'</code>s. You may assume the following rules:</p>
<ul>
<li>You receive a valid board, made of only battleships or empty slots.</li>
<li>Battleships can only be placed horizontally or vertically. In other words, they can only be made of the shape&nbsp;<code>1xN</code>&nbsp;(1 row, N columns) or&nbsp;<code>Nx1</code>&nbsp;(N rows, 1 column), where N can be of any size.</li>
<li>At least one horizontal or vertical cell separates between two battleships - there are no adjacent battleships.</li>
</ul>
<p>Example:</p>
<pre>X..X
...X
...X
</pre>
<p>In the above board there are 2 battleships.</p>
<p>Invalid Example:</p>
<pre>...X
XXXX
...X
</pre>
<p>This is not a valid board - as battleships will always have a cell separating between them.</p>
<p>Your algorithm should not modify the value of the board.</p>
<p>&nbsp;</p>
<p>è¿™é“é¢˜å¥½åƒä¹‹å‰åœ¨åœ°é‡Œé¢è§è¿‡ï¼Œå¿˜äº†æ˜¯å“ªå®¶å…¬å¸çš„é¢è¯•é¢˜äº†ï¼Œç°åœ¨è¢«LeetCodeæ”¶å½•äº†ï¼Œæ„Ÿè§‰ç°åœ¨LeetCodeæ›´æ–°è¶Šæ¥è¶Šå¿«äº†ï¼Œæ„Ÿè§‰è¦æˆä¸ºç¬¬ä¸€å¤§é¢˜åº“äº†ï¼Œèµä¸€ä¸ªğŸ‘ã€‚è¿™é“é¢˜è®©æˆ‘ä»¬æ±‚æˆ˜èˆ°çš„ä¸ªæ•°ï¼Œæ‰€è°“çš„æˆ˜èˆ°å°±æ˜¯åªèƒ½æ˜¯ä¸€è¡Œæˆ–è€…ä¸€åˆ—ï¼Œä¸èƒ½æœ‰æ‹å¼¯ã€‚è¿™é“é¢˜é™ä½äº†éš¾åº¦çš„åšæ³•æ˜¯é™å®šäº†ä¸ä¼šæœ‰ç›¸é‚»çš„ä¸¤ä¸ªæˆ˜èˆ°çš„å­˜åœ¨ï¼Œæœ‰äº†è¿™ä¸€ç‚¹é™åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦éå†ä¸€æ¬¡äºŒç»´æ•°ç»„å°±è¡Œäº†ï¼Œåªè¦æ‰¾å‡ºæˆ˜èˆ°çš„èµ·å§‹ç‚¹ã€‚æ‰€è°“çš„æˆ˜èˆ°èµ·å§‹ç‚¹ï¼Œå°±æ˜¯ä¸ºXçš„ç‚¹ï¼Œè€Œä¸”è¯¥ç‚¹çš„ä¸Šæ–¹å’Œå·¦è¾¹çš„ç‚¹ä¸èƒ½ä¸ºXï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„ç‚¹å³å¯ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<p>&nbsp;</p>
<p>è§£æ³•ä¸€ï¼š</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">int</span> countBattleships(vector&lt;vector&lt;<span style="color: #0000ff;">char</span>&gt;&gt;&amp;<span style="color: #000000;"> board) {
        </span><span style="color: #0000ff;">if</span> (board.empty() || board[<span style="color: #800080;">0</span>].empty()) <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> res = <span style="color: #800080;">0</span>, m = board.size(), n = board[<span style="color: #800080;">0</span><span style="color: #000000;">].size();
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; m; ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; n; ++<span style="color: #000000;">j) {
                </span><span style="color: #0000ff;">if</span> (board[i][j] == <span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span> || (i &gt; <span style="color: #800080;">0</span> &amp;&amp; board[i - <span style="color: #800080;">1</span>][j] == <span style="color: #800000;">'</span><span style="color: #800000;">X</span><span style="color: #800000;">'</span>) || (j &gt; <span style="color: #800080;">0</span> &amp;&amp; board[i][j - <span style="color: #800080;">1</span>] == <span style="color: #800000;">'</span><span style="color: #800000;">X</span><span style="color: #800000;">'</span>)) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
                </span>++<span style="color: #000000;">res;
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>ç„¶è€Œæˆ‘è‡ªå·±åœ¨åšçš„æ—¶å€™å¹¶æ²¡æœ‰æ³¨æ„åˆ°é¢˜ç›®ä¸­é™åˆ¶äº†ä¸¤è‰˜æˆ˜èˆ°ä¸èƒ½ç›¸é‚»çš„æƒ…å†µï¼Œæˆ‘åŠ ä¸Šäº†å¤„ç†æ–¹æ³•ï¼Œé¦–å…ˆæˆ‘ç®—å‡ºæ¥äº†æ‰€æœ‰è¿ç»­Xçš„åŒºåŸŸçš„ä¸ªæ•°ï¼Œæ–¹æ³•è·Ÿä¹‹å‰é‚£é“<a href="http://www.cnblogs.com/grandyang/p/4402656.html" target="_blank">Number of Islands</a>ä¸€æ ·ï¼Œç¨æœ‰ä¸åŒçš„æ˜¯ï¼Œæˆ‘åˆ†åˆ«è®°å½•ä¸‹æ¥æ¯ä¸€ä¸ªè¿ç»­åŒºåŸŸçš„iå’Œjï¼ŒæŠŠæ‰€æœ‰çš„ç‚¹çš„æ¨ªçºµåæ ‡åˆ†åˆ«æˆ–äº†èµ·æ¥ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¦‚æœæ˜¯åœ¨ä¸€æ¡ç›´çº¿ä¸Šçš„æˆ˜èˆ°ï¼Œé‚£ä¹ˆæ‰€æœ‰ç‚¹è‚¯å®šæ˜¯è¦ä¹ˆæ¨ªåæ ‡éƒ½ç›¸åŒï¼Œè¦ä¹ˆçºµåæ ‡éƒ½ç›¸åŒï¼Œæ‰€ä»¥æœ€åæˆ‘ä»¬æ£€æµ‹å¦‚æœæ¨ªçºµåæ ‡çš„ç´¯ç§¯æˆ–éƒ½è·Ÿä¹‹å‰çš„iå’Œjä¸åŒçš„è¯ï¼Œé‚£ä¹ˆä¸€å®šä¸æ˜¯é¢˜ç›®ä¸­å®šä¹‰çš„æˆ˜èˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸ç´¯åŠ ç»“æœresï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<p>&nbsp;</p>
<p>è§£æ³•äºŒï¼š</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">int</span> countBattleships(vector&lt;vector&lt;<span style="color: #0000ff;">char</span>&gt;&gt;&amp;<span style="color: #000000;"> board) {
        </span><span style="color: #0000ff;">if</span> (board.empty() || board[<span style="color: #800080;">0</span>].empty()) <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> m = board.size(), n = board[<span style="color: #800080;">0</span>].size(), res = <span style="color: #800080;">0</span><span style="color: #000000;">;
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">bool</span>&gt;&gt; visited(m, vector&lt;<span style="color: #0000ff;">bool</span>&gt;(n, <span style="color: #0000ff;">false</span><span style="color: #000000;">));
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; m; ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; n; ++<span style="color: #000000;">j) {
                </span><span style="color: #0000ff;">if</span> (board[i][j] == <span style="color: #800000;">'</span><span style="color: #800000;">X</span><span style="color: #800000;">'</span> &amp;&amp; !<span style="color: #000000;">visited[i][j]) {
                    </span><span style="color: #0000ff;">int</span> vertical = <span style="color: #800080;">0</span>, horizontal = <span style="color: #800080;">0</span><span style="color: #000000;">;
                    dfs(board, visited, vertical, horizontal, i, j);
                    </span><span style="color: #0000ff;">if</span> (vertical == i || horizontal == j) ++<span style="color: #000000;">res;
                }
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
    </span><span style="color: #0000ff;">void</span> dfs(vector&lt;vector&lt;<span style="color: #0000ff;">char</span>&gt;&gt;&amp; board, vector&lt;vector&lt;<span style="color: #0000ff;">bool</span>&gt;&gt;&amp; visited, <span style="color: #0000ff;">int</span>&amp; vertical, <span style="color: #0000ff;">int</span>&amp; horizontal, <span style="color: #0000ff;">int</span> i, <span style="color: #0000ff;">int</span><span style="color: #000000;"> j) {
        </span><span style="color: #0000ff;">int</span> m = board.size(), n = board[<span style="color: #800080;">0</span><span style="color: #000000;">].size();
        </span><span style="color: #0000ff;">if</span> (i &lt; <span style="color: #800080;">0</span> || i &gt;= m || j &lt; <span style="color: #800080;">0</span> || j &gt;= n || visited[i][j] || board[i][j] == <span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>) <span style="color: #0000ff;">return</span><span style="color: #000000;">;
        vertical </span>|= i; horizontal |=<span style="color: #000000;"> j;
        visited[i][j] </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        dfs(board, visited, vertical, horizontal, i </span>- <span style="color: #800080;">1</span><span style="color: #000000;">, j);
        dfs(board, visited, vertical, horizontal, i </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">, j);
        dfs(board, visited, vertical, horizontal, i, j </span>- <span style="color: #800080;">1</span><span style="color: #000000;">);
        dfs(board, visited, vertical, horizontal, i, j </span>+ <span style="color: #800080;">1</span><span style="color: #000000;">);
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>æ—¢ç„¶DFSèƒ½å®ç°ï¼Œé‚£ä¹ˆBFSå°±åº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œè¿™é‡Œå®Œå…¨æŒ‰é¢˜ç›®çš„è¦æ±‚ï¼Œé»˜è®¤ä¸¤ä¸ªæˆ˜èˆ°ä¸ä¼šç›¸é‚»ï¼Œå¹¶æ²¡æœ‰æ·»åŠ è§£æ³•äºŒä¸­çš„è¿‡æ»¤æ¡ä»¶ï¼Œå‚è§ä»£ç å¦‚ä¸‹ï¼š</p>
<p>&nbsp;</p>
<p>è§£æ³•ä¸‰ï¼š</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">int</span> countBattleships(vector&lt;vector&lt;<span style="color: #0000ff;">char</span>&gt;&gt;&amp;<span style="color: #000000;"> board) {
        </span><span style="color: #0000ff;">if</span> (board.empty() || board[<span style="color: #800080;">0</span>].empty()) <span style="color: #0000ff;">return</span> <span style="color: #800080;">0</span><span style="color: #000000;">;
        </span><span style="color: #0000ff;">int</span> res = <span style="color: #800080;">0</span>, m = board.size(), n = board[<span style="color: #800080;">0</span><span style="color: #000000;">].size();
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">bool</span>&gt;&gt; visited(m, vector&lt;<span style="color: #0000ff;">bool</span>&gt;(n, <span style="color: #0000ff;">false</span><span style="color: #000000;">));
        vector</span>&lt;vector&lt;<span style="color: #0000ff;">int</span>&gt;&gt; dirs{{<span style="color: #800080;">0</span>,-<span style="color: #800080;">1</span>},{-<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span>},{<span style="color: #800080;">0</span>,<span style="color: #800080;">1</span>},{<span style="color: #800080;">1</span>,<span style="color: #800080;">0</span><span style="color: #000000;">}};
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; m; ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> j = <span style="color: #800080;">0</span>; j &lt; n; ++<span style="color: #000000;">j) {
                </span><span style="color: #0000ff;">if</span> (board[i][j] == <span style="color: #800000;">'</span><span style="color: #800000;">X</span><span style="color: #800000;">'</span> &amp;&amp; !<span style="color: #000000;">visited[i][j]) {
                    </span>++<span style="color: #000000;">res;
                    queue</span>&lt;pair&lt;<span style="color: #0000ff;">int</span>, <span style="color: #0000ff;">int</span>&gt;&gt;<span style="color: #000000;"> q;
                    q.push({i, j});
                    </span><span style="color: #0000ff;">while</span> (!<span style="color: #000000;">q.empty()) {
                        auto t </span>=<span style="color: #000000;"> q.front(); q.pop();
                        visited[t.first][t.second] </span>= <span style="color: #0000ff;">true</span><span style="color: #000000;">;
                        </span><span style="color: #0000ff;">for</span><span style="color: #000000;"> (auto dir : dirs) {
                            </span><span style="color: #0000ff;">int</span> x = t.first + dir[<span style="color: #800080;">0</span>], y = t.second + dir[<span style="color: #800080;">1</span><span style="color: #000000;">];
                            </span><span style="color: #0000ff;">if</span> (x &lt; <span style="color: #800080;">0</span> || x &gt;= m || y &lt; <span style="color: #800080;">0</span> || y &gt;= n || visited[x][y] || board[x][y] == <span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span>) <span style="color: #0000ff;">continue</span><span style="color: #000000;">;
                            q.push({x, y});
                        }
                    }
                }
            }
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://discuss.leetcode.com/topic/62970/simple-java-solution" target="_blank">https://discuss.leetcode.com/topic/62970/simple-java-solution</a></p>
<p><a href="https://discuss.leetcode.com/topic/62997/dfs-bfs-flood-fill-algorithm-with-c/2" target="_blank">https://discuss.leetcode.com/topic/62997/dfs-bfs-flood-fill-algorithm-with-c/2</a></p>
<p>&nbsp;</p>
<p><a href="http://www.cnblogs.com/grandyang/p/4606334.html" target="_blank">LeetCode All in One é¢˜ç›®è®²è§£æ±‡æ€»(æŒç»­æ›´æ–°ä¸­...)</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
