<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/grandyang/p/5361967.html">[LeetCode] Duplicate Emails 重复的邮箱</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>&nbsp;</p>
<p>Write a SQL query to find all duplicate emails in a table named <code>Person</code>.</p>
<pre>+----+---------+
| Id | Email   |
+----+---------+
| 1  | a@b.com |
| 2  | c@d.com |
| 3  | a@b.com |
+----+---------+
</pre>
<p>For example, your query should return the following for the above table:</p>
<pre>+---------+
| Email   |
+---------+
| a@b.com |
+---------+
</pre>
<p><strong>Note</strong>: All emails are in lowercase.</p>
<p>&nbsp;</p>
<p>这道题让我们求重复的邮箱，那么最直接的方法就是用Group by...Having Count(*)...的固定搭配来做，代码如下：</p>
<p>&nbsp;</p>
<p>解法一：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">SELECT</span> Email <span style="color: #0000ff;">FROM</span> Person <span style="color: #0000ff;">GROUP</span> <span style="color: #0000ff;">BY</span><span style="color: #000000;"> Email
</span><span style="color: #0000ff;">HAVING</span> <span style="color: #ff00ff;">COUNT</span>(<span style="color: #808080;">*</span>) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">1</span>;</pre>
</div>
<p>&nbsp;</p>
<p>我们还可以用内交来做，用Email来内交两个表，然后返回Id不同的行，则说明两个不同的人使用了相同的邮箱：</p>
<p>&nbsp;</p>
<p>解法二：</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">SELECT</span> <span style="color: #0000ff;">DISTINCT</span> p1.Email <span style="color: #0000ff;">FROM</span><span style="color: #000000;"> Person p1
</span><span style="color: #808080;">JOIN</span> Person p2 <span style="color: #0000ff;">ON</span> p1.Email <span style="color: #808080;">=</span><span style="color: #000000;"> p2.Email
</span><span style="color: #0000ff;">WHERE</span> p1.Id <span style="color: #808080;">&lt;&gt;</span> p2.Id;</pre>
</div>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://leetcode.com/discuss/53206/a-solution-using-a-group-by-and-another-one-using-a-self-join" target="_blank">https://leetcode.com/discuss/53206/a-solution-using-a-group-by-and-another-one-using-a-self-join</a></p>
<p>&nbsp;</p>
<p><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/grandyang/p/4606334.html">LeetCode All in One 题目讲解汇总(持续更新中...)</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
