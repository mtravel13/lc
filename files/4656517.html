<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/grandyang/p/4656517.html">[LeetCode] Sliding Window Maximum 滑动窗口最大值</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>&nbsp;</p>
<p>Given an array&nbsp;<em>nums</em>, there is a sliding window of size&nbsp;<em>k</em>&nbsp;which is moving from the very left of the array to the very right. You can only see the&nbsp;<em>k</em>&nbsp;numbers in the window. Each time the sliding window moves right by one position.</p>
<p>For example,<br />Given&nbsp;<em>nums</em>&nbsp;=&nbsp;<code>[1,3,-1,-3,5,3,6,7]</code>, and&nbsp;<em>k</em>&nbsp;= 3.</p>
<pre>Window position                Max
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
</pre>
<p>Therefore, return the max sliding window as&nbsp;<code>[3,3,5,5,6,7]</code>.</p>
<p>Note:&nbsp;<br />You may assume&nbsp;<em>k</em>&nbsp;is always valid, 1 &le; k &le; input array's size.</p>
<p>Follow up:<br />Could you solve it in linear time?</p>
<p>Hint:</p>
<ol>
<li class="hint animated fadeInLeft">How about using a data structure such as deque (double-ended queue)?</li>
<li class="hint animated fadeInLeft">The queue size need not be the same as the window&rsquo;s size.</li>
<li class="hint animated fadeInLeft">Remove redundant elements and the queue should store only elements that need to be considered.</li>
</ol>
<p>&nbsp;</p>
<p>这道题给定了一个数组，还给了一个窗口大小k，让我们每次向右滑动一个数字，每次返回窗口内的数字的最大值，而且要求我们代码的时间复杂度为O(n)。提示我们要用双向队列deque来解题，并提示我们窗口中只留下有用的值，没用的全移除掉。果然Hard的题目我就是不会做，网上看到了别人的解法才明白，解法又巧妙有简洁，膜拜啊。大概思路是用双向队列保存数字的下标，遍历整个数组，如果此时队列的首元素是i - k的话，表示此时窗口向右移了一步，则移除队首元素。然后比较队尾元素和将要进来的值，如果小的话就都移除，然后此时我们把队首元素加入结果中即可，参见代码如下：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    vector</span>&lt;<span style="color: #0000ff;">int</span>&gt; maxSlidingWindow(vector&lt;<span style="color: #0000ff;">int</span>&gt;&amp; nums, <span style="color: #0000ff;">int</span><span style="color: #000000;"> k) {
        vector</span>&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> res;
        deque</span>&lt;<span style="color: #0000ff;">int</span>&gt;<span style="color: #000000;"> q;
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">int</span> i = <span style="color: #800080;">0</span>; i &lt; nums.size(); ++<span style="color: #000000;">i) {
            </span><span style="color: #0000ff;">if</span> (!q.empty() &amp;&amp; q.front() == i -<span style="color: #000000;"> k) q.pop_front();
            </span><span style="color: #0000ff;">while</span> (!q.empty() &amp;&amp; nums[q.back()] &lt;<span style="color: #000000;"> nums[i]) q.pop_back();
            q.push_back(i);
            </span><span style="color: #0000ff;">if</span> (i &gt;= k - <span style="color: #800080;">1</span><span style="color: #000000;">) res.push_back(nums[q.front()]);
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> res;
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://leetcode.com/discuss/46594/clean-c-o-n-solution-using-a-deque" target="_blank">https://leetcode.com/discuss/46594/clean-c-o-n-solution-using-a-deque</a></p>
<p>&nbsp;</p>
<p><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/grandyang/p/4606334.html">LeetCode All in One 题目讲解汇总(持续更新中...)</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
