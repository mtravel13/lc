<div id="post_detail">
<!--done-->
<div id="topics">
	<div class = "post">
		<h1 class = "postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/grandyang/p/6954197.html">[LeetCode] Fraction Addition and Subtraction 分数加减法</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><p>&nbsp;</p>
<p>Given a string representing an expression of fraction addition and subtraction, you need to return the calculation result in string format. The final result should be&nbsp;<a href="https://en.wikipedia.org/wiki/Irreducible_fraction">irreducible fraction</a>. If your final result is an integer, say&nbsp;<code>2</code>, you need to change it to the format of fraction that has denominator&nbsp;<code>1</code>. So in this case,&nbsp;<code>2</code>&nbsp;should be converted to&nbsp;<code>2/1</code>.</p>
<p>Example 1:</p>
<pre>Input:"-1/2+1/2"
Output: "0/1"
</pre>
<p>&nbsp;</p>
<p>Example 2:</p>
<pre>Input:"-1/2+1/2+1/3"
Output: "1/3"
</pre>
<p>&nbsp;</p>
<p>Example 3:</p>
<pre>Input:"1/3-1/2"
Output: "-1/6"
</pre>
<p>&nbsp;</p>
<p>Example 4:</p>
<pre>Input:"5/3+1/3"
Output: "2/1"
</pre>
<p>&nbsp;</p>
<p>Note:</p>
<ol>
<li>The input string only contains&nbsp;<code>'0'</code>&nbsp;to&nbsp;<code>'9'</code>,&nbsp;<code>'/'</code>,&nbsp;<code>'+'</code>&nbsp;and&nbsp;<code>'-'</code>. So does the output.</li>
<li>Each fraction (input and output) has format&nbsp;<code>&plusmn;numerator/denominator</code>. If the first input fraction or the output is positive, then&nbsp;<code>'+'</code>&nbsp;will be omitted.</li>
<li>The input only contains valid&nbsp;irreducible fractions, where the&nbsp;numerator&nbsp;and&nbsp;denominator&nbsp;of each fraction will always be in the range [1,10]. If the denominator is 1, it means this fraction is actually an integer in a fraction format defined above.</li>
<li>The number of given fractions will be in the range [1,10].</li>
<li>The numerator and denominator of the&nbsp;final result&nbsp;are guaranteed to be valid and in the range of 32-bit int.</li>
</ol>
<p>&nbsp;</p>
<p>这道题让我们做分数的加减法，给了我们一个分数加减法式子的字符串，然我们算出结果，结果当然还是用分数表示了。那么其实这道题主要就是字符串的拆分处理，再加上一点中学的数学运算的知识就可以了。这里我们使用字符流处理类来做，每次按顺序读入一个数字，一个字符，和另一个数字。分别代表了分子，除号，分母。我们初始化分子为0，分母为1，这样就可以进行任何加减法了。中学数学告诉我们必须将分母变为同一个数，分子才能相加，为了简便，我们不求最小公倍数，而是直接乘上另一个数的分母，然后相加。不过得到的结果需要化简一下，我们求出分子分母的最大公约数，记得要取绝对值，然后分子分母分别除以这个最大公约数就是最后的结果了，参见代码如下：</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">class</span><span style="color: #000000;"> Solution {
</span><span style="color: #0000ff;">public</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">string</span> fractionAddition(<span style="color: #0000ff;">string</span><span style="color: #000000;"> expression) {
        istringstream </span><span style="color: #0000ff;">is</span><span style="color: #000000;">(expression);
        </span><span style="color: #0000ff;">int</span> num = <span style="color: #800080;">0</span>, dem = <span style="color: #800080;">0</span>, A = <span style="color: #800080;">0</span>, B = <span style="color: #800080;">1</span><span style="color: #000000;">; 
        </span><span style="color: #0000ff;">char</span><span style="color: #000000;"> c;
        </span><span style="color: #0000ff;">while</span> (<span style="color: #0000ff;">is</span> &gt;&gt; num &gt;&gt; c &gt;&gt;<span style="color: #000000;"> dem) {
            A </span>= A * dem + num *<span style="color: #000000;"> B;
            B </span>*=<span style="color: #000000;"> dem;
            </span><span style="color: #0000ff;">int</span> g =<span style="color: #000000;"> abs(gcd(A, B));
            A </span>/=<span style="color: #000000;"> g;
            B </span>/=<span style="color: #000000;"> g;
        }
        </span><span style="color: #0000ff;">return</span> to_string(A) + <span style="color: #800000;">"</span><span style="color: #800000;">/</span><span style="color: #800000;">"</span> +<span style="color: #000000;"> to_string(B);
    }
    </span><span style="color: #0000ff;">int</span> gcd(<span style="color: #0000ff;">int</span> a, <span style="color: #0000ff;">int</span><span style="color: #000000;"> b) {
        </span><span style="color: #0000ff;">return</span> (b == <span style="color: #800080;">0</span>) ? a : gcd(b, a %<span style="color: #000000;"> b);
    }
};</span></pre>
</div>
<p>&nbsp;</p>
<p>参考资料：</p>
<p><a href="https://discuss.leetcode.com/topic/89991/concise-java-solution" target="_blank">https://discuss.leetcode.com/topic/89991/concise-java-solution</a></p>
<p><a href="https://discuss.leetcode.com/topic/90061/small-simple-c-java-python" target="_blank">https://discuss.leetcode.com/topic/90061/small-simple-c-java-python</a></p>
<p>&nbsp;</p>
<p><a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/grandyang/p/4606334.html">LeetCode All in One 题目讲解汇总(持续更新中...)</a></p></div><div id="MySignature"></div>
<div class="clear"></div>
